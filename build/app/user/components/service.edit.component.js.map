{"version":3,"sources":["app/user/components/service.edit.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAmBA;gBAOE,8BAAoB,YAAyB,EACrC,WAAwB,EACxB,oBAA0C,EAC3C,MAAa,EACZ,cAA8B;oBAJlB,iBAAY,GAAZ,YAAY,CAAa;oBACrC,gBAAW,GAAX,WAAW,CAAa;oBACxB,yBAAoB,GAApB,oBAAoB,CAAsB;oBAC3C,WAAM,GAAN,MAAM,CAAO;oBACZ,mBAAc,GAAd,cAAc,CAAgB;oBAVvC,wBAAmB,GAAG,EAAC,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,EAAC,CAAC;oBACnD,aAAQ,GAAW,KAAK,CAAC;oBACzB,oBAAe,GAAW,KAAK,CAAC;gBAS/B,CAAC;gBAEF,uCAAQ,GAAR;oBAAA,iBAwBC;oBAvBA,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;yBAC1B,SAAS,CACN,UAAA,QAAQ;wBACV,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;4BACnC,KAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC;4BAEjC,KAAI,CAAC,eAAe,GAAG,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC;gCAC7C,UAAU,EAAE,CAAC,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,EAAE,kBAAU,CAAC,QAAQ,CAAC;gCAC/D,WAAW,EAAE,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC;oCACnC,UAAU,EAAE,CAAC,EAAE,EAAE,sCAAiB,CAAC,uBAAuB,CAAC;oCAC3D,aAAa,EAAE,CAAC,EAAE,CAAC;iCACnB,EAAE,EAAC,SAAS,EAAE,sCAAiB,CAAC,aAAa,EAAC,CAAC;6BAChD,CAAC,CAAC;4BAEH,KAAI,CAAC,eAAe,GAAG,IAAI,CAAC;wBAC7B,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACP,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,EAAC,MAAM,EAAE,QAAQ,CAAC,MAAM,EAAE,OAAO,EAAE,kBAAkB,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAC,CAAC,CAAC,CAAC;wBAC5G,CAAC;oBACF,CAAC,EACD,UAAA,KAAK;wBACJ,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,EAAC,MAAM,EAAE,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,kBAAkB,CAAC,KAAK,CAAC,KAAK,CAAC,EAAC,CAAC,CAAC,CAAC;oBACpG,CAAC,CACD,CAAC;gBACH,CAAC;gBAED,mCAAI,GAAJ;oBAAA,iBAsBC;oBArBA,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,cAAc,EAAE,yCAAyC,EAAE,EAAC,OAAO,EAAC,CAAC,EAAE,YAAY,EAAC,KAAK,EAAC,CAAC,CAAC;oBAC5H,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;oBAErB,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,IAAI,0BAAW,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,EACnF,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;yBACrD,SAAS,CACT,UAAC,QAAQ;wBACR,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;wBACtB,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;4BACnC,KAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,gBAAgB,EAAE,yCAAyC,EAAE,EAAE,CAAC,CAAC;4BACnG,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;wBACxD,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,KAAK,MAAM,CAAC,CAAC,CAAC;4BACvC,EAAE,CAAC,CAAC,QAAQ,CAAC,OAAO,KAAK,sBAAsB,CAAC,CAAC,CAAC;gCACjD,KAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,MAAM,EAAE,qCAAqC,EAAE,EAAE,CAAC,CAAC;4BACpF,CAAC;wBACF,CAAC;oBACF,CAAC,EACD,UAAA,KAAK;wBACJ,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,EAAC,MAAM,EAAE,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,kBAAkB,CAAC,KAAK,CAAC,KAAK,CAAC,EAAC,CAAC,CAAC,CAAC;oBACpG,CAAC,CACD,CAAC;gBACH,CAAC;gBArEF;oBAAC,gBAAS,CAAC;wBACV,QAAQ,EAAE,cAAc;wBACxB,WAAW,EAAE,yCAAyC;wBACtD,UAAU,EAAE,CAAC,0BAAiB,EAAE,gCAAwB,EAAE,qDAA4B,EAAE,kCAAe,EAAE,kCAAe,CAAC;wBACzH,SAAS,EAAE,CAAC,0BAAW,EAAE,6CAAoB,CAAC;wBAC9C,SAAS,EAAE,CAAC,gCAAgC,CAAC;qBAC7C,CAAC;;wCAAA;gBAgEF,2BAAC;YAAD,CA/DA,AA+DC,IAAA;YA/DD,uDA+DC,CAAA","file":"app/user/components/service.edit.component.js","sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { Router, ROUTER_DIRECTIVES, ActivatedRoute } from '@angular/router';\nimport { REACTIVE_FORM_DIRECTIVES, FormBuilder, Validators, FormControl } from '@angular/forms';\nimport { NotificationsService, SimpleNotificationsComponent } from 'angular2-notifications';\nimport { ValidationService } from '../../common/services/validation.service';\nimport { LoaderAnimation } from '../../common/components/loader.animation';\nimport { ControlMessages } from '../../common/components/control.messages';\nimport { UserService } from '../services/user.service';\nimport { ServiceUser } from '../models/service.user';\nimport 'rxjs/add/operator/map';\nimport { Observable } from 'rxjs/Observable';\n\n@Component({\n\tselector: \"service-edit\",\n\ttemplateUrl: \"./app/user/components/service.edit.html\",\n\tdirectives: [ROUTER_DIRECTIVES, REACTIVE_FORM_DIRECTIVES, SimpleNotificationsComponent, ControlMessages, LoaderAnimation],\n\tproviders: [UserService, NotificationsService],\n\tstyleUrls: ['./app/user/components/user.css'],\n})\nexport class ServiceEditComponent implements OnInit {\n\tnotificationOptions = {timeOut: 5000, maxStack: 1};\n\tisSaving:boolean = false;\n\tisDataAvailable:boolean = false;\n  serviceUserForm:any;\n\tserviceUser:ServiceUser[];\n\n  constructor(private _userService: UserService,\n\t\tprivate formBuilder: FormBuilder,\n\t\tprivate _notificationService: NotificationsService,\n\t\tpublic router:Router,\n\t\tprivate activatedRoute: ActivatedRoute) {\n  }\n\n\tngOnInit() {\n\t\tthis._userService.service()\n\t\t.subscribe(\n      response => {\n\t\t\t\tif (response.status === 'success') {\n\t\t\t\t\tthis.serviceUser = response.data;\n\n\t\t\t\t\tthis.serviceUserForm = this.formBuilder.group({\n\t\t\t\t\t\t'username': [this.serviceUser['username'], Validators.required],\n\t\t\t\t\t\t'passwords': this.formBuilder.group({\n\t\t\t\t\t\t\t'password': ['', ValidationService.passwordValidatorChange],\n\t\t\t\t\t\t\t're_password': ['']\n\t\t\t\t\t\t}, {validator: ValidationService.passwordMatch})\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.isDataAvailable = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.router.navigate(['/error', {status: response.status, message: encodeURIComponent(response.message)}]);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tthis.router.navigate(['/error', {status: error.status, message: encodeURIComponent(error._body)}]);\n\t\t\t}\n\t\t);\n\t}\n\n\tsave() {\n\t\tthis._notificationService.alert('Kaydediliyor', 'İşleminiz yapılıyor, lütfen bekleyiniz.', {timeOut:0, clickToClose:false});\n\t\tthis.isSaving = true;\n\n\t\tthis._userService.service_update(new ServiceUser(this.serviceUserForm.value.username,\n\t\t\tthis.serviceUserForm.value.passwords.password, null))\n\t\t.subscribe(\n\t\t\t(response) => {\n\t\t\t\tthis.isSaving = false;\n\t\t\t\tif (response.status === 'success') {\n\t\t\t\t\tthis._notificationService.success('İşlem Başarılı', 'Servis kullanıcı bilgileri güncellendi.', {});\n\t\t\t\t\tthis.serviceUser['enabled'] = response.data['enabled'];\n\t\t\t\t} else if (response.status === 'fail') {\n\t\t\t\t\tif (response.message === 'user_username_exists') {\n\t\t\t\t\t\tthis._notificationService.error('Hata', 'Bu kullanıcı adını kullanamazsınız.', {});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tthis.router.navigate(['/error', {status: error.status, message: encodeURIComponent(error._body)}]);\n\t\t\t}\n\t\t);\n\t}\n}\n"],"sourceRoot":"/source/"}