{"version":3,"sources":["app/user/components/listuser.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAcA;gBAmBC,2BACS,cAA8B,EAC9B,MAAc,EACd,YAAyB;oBAFzB,mBAAc,GAAd,cAAc,CAAgB;oBAC9B,WAAM,GAAN,MAAM,CAAQ;oBACd,iBAAY,GAAZ,YAAY,CAAa;oBAlBlC,YAAO,GAAU,CAAC,CAAC;oBAInB,oBAAe,GAAW,KAAK,CAAC;oBAChC,iBAAY,GAAU,QAAQ,CAAC;oBAC/B,aAAQ,GAAU,SAAS,CAAC;oBAC5B,cAAS,GAAU,KAAK,CAAC;oBACzB,aAAQ,GAAU,KAAK,CAAC;oBACxB;;;sBAGE;oBACF,kBAAa,GAAU,CAAC,CAAC;gBAOzB,CAAC;gBAED,oCAAQ,GAAR;oBACC,IAAM,oBAAoB,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;oBACjF,IAAI,CAAC,OAAO,GAAG,oBAAoB,CAAC,MAAM,CAAC,GAAG,CAAC,UAAA,WAAW,IAAI,OAAA,IAAI,EAAJ,CAAI,CAAC,CAAC;oBACpE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC;oBAE3C,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,IAAI,KAAK,WAAW,CAAC,CAAC,CAAC;wBACtC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;oBACf,CAAC;oBAED,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACtB,CAAC;gBAED,gCAAI,GAAJ,UAAK,IAAY;oBAAjB,iBAiBC;oBAhBA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC;yBAC3B,SAAS,CACT,UAAA,QAAQ;wBACP,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;4BACnC,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,YAAY,CAAC,YAAY,CAAC;4BACnD,KAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,KAAI,CAAC,YAAY,CAAC;4BAC9D,KAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC;4BAC7C,KAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;4BACjC,KAAI,CAAC,aAAa,EAAE,CAAC;4BACrB,KAAI,CAAC,eAAe,GAAG,IAAI,CAAC;wBAC7B,CAAC;oBACF,CAAC,EACD,UAAA,KAAK;wBACJ,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,EAAC,MAAM,EAAE,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,kBAAkB,CAAC,KAAK,CAAC,UAAU,CAAC,EAAC,CAAC,CAAC,CAAC;oBACzG,CAAC,CACD,CAAC;gBACH,CAAC;gBAED,uCAAW,GAAX,UAAY,KAAS;oBACpB,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC5B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;wBAC7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;oBACvB,CAAC;oBACD,IAAI,CAAC,aAAa,EAAE,CAAC;gBACtB,CAAC;gBAtEF;oBAAC,gBAAS,CAAC;wBACV,QAAQ,EAAE,WAAW;wBACrB,WAAW,EAAE,qCAAqC;wBAClD,SAAS,EAAE,CAAC,gCAAgC,CAAC;wBAC7C,UAAU,EAAE,CAAC,0BAAiB,EAAE,kCAAqB,EAAE,wBAAe,CAAC;wBACvE,SAAS,EAAE,CAAC,0BAAW,CAAC;qBACxB,CAAC;;qCAAA;gBAiEF,wBAAC;YAAD,CAhEA,AAgEC,IAAA;YAhED,iDAgEC,CAAA","file":"app/user/components/listuser.component.js","sourcesContent":["import { Component, AfterViewInit, OnInit } from \"@angular/core\";\nimport { CORE_DIRECTIVES } from '@angular/common';\nimport { Router, ROUTER_DIRECTIVES, ActivatedRoute } from '@angular/router';\nimport { UserService } from '../services/user.service';\nimport { User } from '../models/user';\nimport { PAGINATION_DIRECTIVES } from 'ng2-bootstrap/components/pagination';\n\n@Component({\n\tselector: \"user-main\",\n\ttemplateUrl: \"./app/user/components/listuser.html\",\n\tstyleUrls: ['./app/user/components/user.css'],\n\tdirectives: [ROUTER_DIRECTIVES, PAGINATION_DIRECTIVES, CORE_DIRECTIVES],\n\tproviders: [UserService]\n})\nexport class UserListComponent implements ControlValueAccessor, OnInit, IPaginationConfig, IAttribute {\n\tusers:User[];\n\ttotalItems:number;\n\tcurrentPage:number;\n\tmaxSize:number = 5;\n\titemsPerPage:number;\n\tpageSub:any;\n\tpage:any;\n\tisDataAvailable:boolean = false;\n\tpreviousText:string = \"Önceki\";\n\tnextText:string = \"Sonraki\";\n\tfirstText:string = \"İlk\";\n\tlastText:string = \"Son\";\n\t/*\n\t* workaround for calling pageChanged event twice\n\t* lame but works\n\t*/\n\tdataLoadCount:number = 0;\n\n\tconstructor(\n\t\tprivate activatedRoute: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate _userService: UserService\n\t\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst parentActivatedRoute = this.router.routerState.parent(this.activatedRoute);\n\t\tthis.pageSub = parentActivatedRoute.params.map(routeParams => page);\n\t\tthis.page = this.pageSub.source.value.page;\n\n\t\tif (typeof this.page === 'undefined') {\n\t\t\tthis.page = 1;\n\t\t}\n\n\t\tthis.list(this.page);\n\t}\n\n\tlist(page: number) {\n\t\tthis._userService.list(page)\n\t\t.subscribe(\n\t\t\tresponse => {\n\t\t\t\tif (response.status === 'success') {\n\t\t\t\t\tthis.itemsPerPage = this._userService.itemsPerPage;\n\t\t\t\t\tthis.totalItems = response.data.totalPage * this.itemsPerPage;\n\t\t\t\t\tthis.currentPage = response.data.currentPage;\n\t\t\t\t\tthis.users = response.data.users;\n\t\t\t\t\tthis.dataLoadCount++;\n\t\t\t\t\tthis.isDataAvailable = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tthis.router.navigate(['/error', {status: error.status, message: encodeURIComponent(error.statusText)}]);\n\t\t\t}\n\t\t);\n\t}\n\n\tpageChanged(event:any) {\n\t\tif (this.dataLoadCount > 1) {\n\t\t\tthis.isDataAvailable = false;\n\t\t\tthis.list(event.page);\n\t\t}\n\t\tthis.dataLoadCount++;\n\t}\n}\n"],"sourceRoot":"/source/"}