{"version":3,"sources":["app/user/components/user.list.component.ts"],"names":[],"mappings":"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","file":"app/user/components/user.list.component.js","sourcesContent":["import { Component, AfterViewInit, OnInit, ViewChild } from \"@angular/core\";\nimport { CORE_DIRECTIVES } from '@angular/common';\nimport { Router, ROUTER_DIRECTIVES, ActivatedRoute } from '@angular/router';\nimport { PAGINATION_DIRECTIVES } from 'ng2-bootstrap/components/pagination';\nimport { DialogRef } from 'angular2-modal';\nimport { MODAL_DIRECTIVES, ModalComponent } from 'ng2-bs3-modal/ng2-bs3-modal';\nimport { NotificationsService, SimpleNotificationsComponent } from 'angular2-notifications';\nimport { UserService } from '../services/user.service';\nimport { User } from '../models/user';\nimport { SharedService } from '../../common/services/shared.service';\n\n@Component({\n\tselector: \"user-list\",\n\ttemplateUrl: \"./app/user/components/user.list.html\",\n\tstyleUrls: ['./app/user/components/user.css'],\n\tdirectives: [ROUTER_DIRECTIVES, PAGINATION_DIRECTIVES, CORE_DIRECTIVES, MODAL_DIRECTIVES, SimpleNotificationsComponent],\n\tproviders: [UserService, NotificationsService]\n})\nexport class UserListComponent implements OnInit {\n\tnotificationOptions = {timeOut: 5000, maxStack: 1};\n\tusers:User[];\n\tdeletingUser:User;\n\tisDeleting:boolean = false;\n\t/* pagination items */\n\ttotalItems:number;\n\tcurrentPage:number;\n\tmaxSize:number = 5;\n\titemsPerPage:number;\n\tpageSub:any;\n\tpage:number;\n\tpreviousText:string = \"Önceki\";\n\tnextText:string = \"Sonraki\";\n\tfirstText:string = \"İlk\";\n\tlastText:string = \"Son\";\n\tisPaginationDisabled:boolean = true;\n\tisTableAvailable:boolean = false;\n\t/*\n\t* workaround for calling pageChanged event twice\n\t* lame but works\n\t*/\n\tdataLoadCount:number = 0;\n\t@ViewChild('userDeleteModal')\n\tuserDeleteModal: ModalComponent;\n\tmodalDisableClose:any = 'static';\n\n\tconstructor(\n\t\tprivate activatedRoute: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate _userService: UserService,\n\t\tprivate _notificationService: NotificationsService,\n\t\tprivate _sharedService: SharedService\n\t\t) {\n\t}\n\n\tngOnInit() {\n\t\tthis.page = this.activatedRoute.snapshot.params['page'];\n\t\tif (typeof this.page === 'undefined') {\n\t\t\tthis.page = 1;\n\t\t\tthis.dataLoadCount = 2;\n\t\t}\n\t\tthis.list(this.page);\n\t}\n\n\tlist(page: number) {\n\t\tthis.isPaginationDisabled = true;\n\t\tthis.isTableAvailable = false;\n\t\tthis._userService.list(page)\n\t\t.subscribe(\n\t\t\tresponse => {\n\t\t\t\tif (response.status === 'success') {\n\t\t\t\t\tthis.itemsPerPage = this._userService.itemsPerPage;\n\t\t\t\t\tthis.totalItems = response.data.totalPage * this.itemsPerPage;\n\t\t\t\t\tthis.currentPage = response.data.currentPage;\n\t\t\t\t\tthis.users = response.data.content;\n\t\t\t\t\tthis.dataLoadCount++;\n\t\t\t\t\tthis.isTableAvailable = true;\n\t\t\t\t\tthis.isPaginationDisabled = false;\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tthis.router.navigate(['/error', {status: error.status, message: encodeURIComponent(error._body)}]);\n\t\t\t}\n\t\t);\n\t}\n\n\tpageChanged(event:any) {\n\t\tif (this.dataLoadCount > 1) {\n\t\t\tthis.list(event.page);\n\t\t}\n\t\tthis.dataLoadCount++;\n\t}\n\n\topenUserDeleteModal(user:User) {\n\t\tthis.deletingUser = user;\n\t\tthis.userDeleteModal.open();\n\t}\n\n\tdelete() {\n\t\tthis.isDeleting = true;\n\t\tthis._userService.delete(this.deletingUser.id)\n\t\t.subscribe(\n\t\t\t(response) => {\n\t\t\t\tthis.isDeleting = false;\n\t\t\t\tif (response.status === 'success') {\n\t\t\t\t\tthis.userDeleteModal.close();\n\t\t\t\t\tthis.list(this.page);\n\t\t\t\t\tthis._notificationService.success('İşlem Başarılı', 'Kullanıcı başarıyla silindi.', {});\n\t\t\t\t} else {\n\t\t\t\t\tthis.router.navigate(['/error', {status: response.status, message: encodeURIComponent(response.message)}]);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tthis.router.navigate(['/error', {status: error.status, message: encodeURIComponent(error._body)}]);\n\t\t\t}\n\t\t);\n\t}\n\n\tonClose() {\n\t\tthis.deletingUser = null;\n\t}\n}\n"],"sourceRoot":"/source/"}