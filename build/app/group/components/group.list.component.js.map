{"version":3,"sources":["app/group/components/group.list.component.ts"],"names":[],"mappings":"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","file":"app/group/components/group.list.component.js","sourcesContent":["import { Component, AfterViewInit, OnInit, ViewChild } from \"@angular/core\";\nimport { CORE_DIRECTIVES } from '@angular/common';\nimport { Router, ROUTER_DIRECTIVES, ActivatedRoute } from '@angular/router';\nimport { PAGINATION_DIRECTIVES } from 'ng2-bootstrap/components/pagination';\nimport { DialogRef } from 'angular2-modal';\nimport { MODAL_DIRECTIVES, ModalComponent } from 'ng2-bs3-modal/ng2-bs3-modal';\nimport { NotificationsService, SimpleNotificationsComponent } from 'angular2-notifications';\nimport { GroupService } from '../services/group.service';\nimport { Group } from '../models/group';\nimport { SharedService } from '../../common/services/shared.service';\n\n@Component({\n\tselector: \"group-main\",\n\ttemplateUrl: \"./app/group/components/group.list.html\",\n\tdirectives: [ROUTER_DIRECTIVES, PAGINATION_DIRECTIVES, CORE_DIRECTIVES, MODAL_DIRECTIVES, SimpleNotificationsComponent],\n\tproviders: [GroupService, NotificationsService]\n})\nexport class GroupListComponent implements OnInit {\n\tnotificationOptions = {timeOut: 5000, maxStack: 1};\n\tpage: number;\n\tgroups:Group[];\n\tdeletingGroup:Group;\n\tisDeleting:boolean = false;\n\t/* pagination items */\n\ttotalItems:number;\n\tcurrentPage:number;\n\tmaxSize:number = 5;\n\titemsPerPage:number;\n\tpreviousText:string = \"Önceki\";\n\tnextText:string = \"Sonraki\";\n\tfirstText:string = \"İlk\";\n\tlastText:string = \"Son\";\n\tisPaginationDisabled:boolean = true;\n\tisTableAvailable:boolean = false;\n\t/*\n\t* workaround for calling pageChanged event twice\n\t* lame but works\n\t*/\n\tdataLoadCount:number = 0;\n\t@ViewChild('groupDeleteModal')\n\tgroupDeleteModal: ModalComponent;\n\tmodalDisableClose:any = 'static';\n\n\tconstructor(\n\t\tprivate activatedRoute: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate _groupService: GroupService,\n\t\tprivate _notificationService: NotificationsService,\n\t\tprivate _sharedService: SharedService\n\t\t) {\n\t}\n\n\tngOnInit() {\n\t\tthis.page = this.activatedRoute.snapshot.params['page'];\n\t\tif (typeof this.page === 'undefined') {\n\t\t\tthis.page = 1;\n\t\t\tthis.dataLoadCount = 2;\n\t\t}\n\t\tthis.list(this.page);\n\t}\n\n\tlist(page: number) {\n\t\tthis.isPaginationDisabled = true;\n\t\tthis.isTableAvailable = false;\n\t\tthis._groupService.list(page)\n\t\t.subscribe(\n\t\t\tresponse => {\n\t\t\t\tif (response.status === 'success') {\n\t\t\t\t\tthis.itemsPerPage = this._groupService.itemsPerPage;\n\t\t\t\t\tthis.totalItems = response.data.totalPage * this.itemsPerPage;\n\t\t\t\t\tthis.currentPage = response.data.currentPage;\n\t\t\t\t\tthis.groups = response.data.content;\n\t\t\t\t\tthis.dataLoadCount++;\n\t\t\t\t\tthis.isTableAvailable = true;\n\t\t\t\t\tthis.isPaginationDisabled = false;\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tthis.router.navigate(['/error', {status: error.status, message: encodeURIComponent(error._body)}]);\n\t\t\t}\n\t\t);\n\t}\n\n\tpageChanged(event:any) {\n\t\tif (this.dataLoadCount > 1) {\n\t\t\tthis.list(event.page);\n\t\t}\n\t\tthis.dataLoadCount++;\n\t}\n\n\topenGroupDeleteModal(group:Group) {\n\t\tthis.deletingGroup = group;\n\t\tthis.groupDeleteModal.open();\n\t}\n\n\tdelete() {\n\t\tthis.isDeleting = true;\n\t\tthis._groupService.delete(this.deletingGroup.id)\n\t\t.subscribe(\n\t\t\t(response) => {\n\t\t\t\tthis.isDeleting = false;\n\t\t\t\tif (response.status === 'success') {\n\t\t\t\t\tthis.groupDeleteModal.close();\n\t\t\t\t\tthis.list(this.page);\n\t\t\t\t\tthis._notificationService.success('İşlem Başarılı', 'Grup başarıyla silindi.', {});\n\t\t\t\t} else {\n\t\t\t\t\tthis.router.navigate(['/error', {status: response.status, message: encodeURIComponent(response.message)}]);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tthis.router.navigate(['/error', {status: error.status, message: encodeURIComponent(error._body)}]);\n\t\t\t}\n\t\t);\n\t}\n\n\tonClose() {\n\t\tthis.deletingGroup = null;\n\t}\n}\n"],"sourceRoot":"/source/"}