{"version":3,"sources":["app/login/components/login.component.ts"],"names":[],"mappings":"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","file":"app/login/components/login.component.js","sourcesContent":["import { Component } from \"@angular/core\";\nimport { Router } from '@angular/router';\nimport { tokenNotExpired } from 'angular2-jwt';\nimport { REACTIVE_FORM_DIRECTIVES, FormBuilder, Validators } from '@angular/forms';\nimport { Http } from '@angular/http';\nimport { NotificationsService, SimpleNotificationsComponent } from 'angular2-notifications';\nimport { LoginService } from '../services/login.service';\nimport { Login } from '../models/login';\nimport { ControlMessages } from '../../common/components/control.messages';\nimport { SharedService } from '../../common/services/shared.service';\n\n@Component({\n\tselector: \"login\",\n\ttemplateUrl: \"./app/login/components/login.html\",\n\tstyleUrls: ['./app/login/components/login.css'],\n\tdirectives: [REACTIVE_FORM_DIRECTIVES, SimpleNotificationsComponent, ControlMessages],\n\tproviders: [NotificationsService, LoginService]\n})\nexport class LoginComponent {\n\tisLogging:boolean = false;\n\tnotificationOptions = {timeOut: 5000, maxStack: 1};\n\tuserLoginForm:any;\n\tisLocked:boolean = false;\n\n\tconstructor(public router:Router,\n\t\t\t\t\t\tpublic http: Http,\n\t\t\t\t\t\tprivate formBuilder: FormBuilder,\n\t\t\t\t\t\tprivate _notificationService: NotificationsService,\n\t\t\t\t\t\tpublic _sharedService: SharedService,\n\t\t\t\t\t\tprivate _loginService: LoginService) {\n\t\tif (tokenNotExpired()) {\n      this.router.navigate(['/home']);\n    }\n\t\tthis.userLoginForm = this.formBuilder.group({\n\t\t\t'username': ['', Validators.required],\n\t\t\t'password': ['', Validators.required]\n\t\t});\n\t}\n\n\tlogin() {\n\t\tif (this.userLoginForm.dirty && this.userLoginForm.valid) {\n\t\t\tthis._notificationService.alert('Giriş İşlemi', 'İşleminiz yapılıyor, lütfen bekleyiniz.', {timeOut:0, clickToClose:false});\n\t\t\tthis.isLogging = true;\n\t\t\tthis._loginService.login(new Login(this.userLoginForm.value.username, this.userLoginForm.value.password))\n\t\t\t\t.subscribe(\n\t\t\t\t\tresponse => {\n\t\t\t\t\t\tlocalStorage.setItem('id_token', response.token);\n\t\t\t\t\t\tthis.router.navigate(['/home']);\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\tlet errorBody = JSON.parse(error._body);\n\t\t\t\t\t\tthis.isLogging = false;\n\t\t\t\t\t\tif (error.status === 401 && errorBody.exception === 'org.springframework.security.authentication.LockedException') {\n\t\t\t\t\t\t\tthis.isLocked = true;\n\t\t\t\t\t\t} else if (error.status === 401 && errorBody.exception === 'org.springframework.security.authentication.BadCredentialsException') {\n\t\t\t\t\t\t\tthis._notificationService.error('Geçersiz Giriş', 'Kullanıcı adı veya şifreniz hatalı', {});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._notificationService.error('Bir Şeyler Yanlış Gitti', 'Şuan sisteme giriş yapılamıyor', {});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t}\n\t}\n\n\tshowLogin() {\n\t\tthis.isLocked = false;\n\t}\n}\n"],"sourceRoot":"/source/"}