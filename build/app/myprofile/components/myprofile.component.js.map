{"version":3,"sources":["app/myprofile/components/myprofile.component.ts"],"names":[],"mappings":"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","file":"app/myprofile/components/myprofile.component.js","sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { Router, ROUTER_DIRECTIVES } from '@angular/router';\nimport { tokenNotExpired } from 'angular2-jwt';\nimport { REACTIVE_FORM_DIRECTIVES, FormBuilder, Validators } from '@angular/forms';\nimport { Http } from '@angular/http';\nimport { NotificationsService, SimpleNotificationsComponent } from 'angular2-notifications';\nimport { ValidationService } from '../../common/services/validation.service';\nimport { LoaderAnimation } from '../../common/components/loader.animation';\nimport { ControlMessages } from '../../common/components/control.messages';\nimport { MyProfileService } from '../services/myprofile.service';\nimport { MyProfile } from '../models/myprofile';\nimport { Group } from '../../group/models/group';\n\n@Component({\n\tselector: \"myprofile\",\n\ttemplateUrl: \"./app/myprofile/components/myprofile.html\",\n\tdirectives: [ROUTER_DIRECTIVES, REACTIVE_FORM_DIRECTIVES, SimpleNotificationsComponent, ControlMessages, LoaderAnimation],\n\tproviders: [MyProfileService, NotificationsService]\n})\nexport class MyProfileComponent implements OnInit {\n\tisDataAvailable:boolean = false;\n\tisSaving:boolean = false;\n  defaultGroupIdValue:number;\n  myProfileForm:any;\n  notificationOptions = {timeOut: 5000, maxStack: 1};\n\tmyProfile: MyProfile = new MyProfile();\n\n  constructor(private _myProfileService: MyProfileService,\n\t\tprivate formBuilder: FormBuilder,\n\t\tprivate _notificationService: NotificationsService,\n\t\tprivate router: Router\n\t) {\n    this.myProfileForm = this.formBuilder.group({\n      'default_group_id': ['', Validators.required],\n      'username': [''],\n      'email': ['', [Validators.required, ValidationService.emailValidator]],\n      'passwords': this.formBuilder.group({\n        'password': ['', ValidationService.passwordValidatorChange],\n        're_password': ['']\n      }, {validator: ValidationService.passwordMatch})\n    });\n  }\n\n\tngOnInit() {\n\t\tthis._myProfileService.load()\n\t\t.subscribe(\n\t\t\t(response) => {\n\t\t\t\tif (response.status === 'success') {\n\t\t\t\t\tthis.myProfile = response.data;\n\t\t\t\t\tthis.myProfileForm.controls.username.updateValue(response.data.username);\n\t        this.myProfileForm.controls.email.updateValue(response.data.email);\n\t        this.myProfileForm.controls.default_group_id.updateValue(response.data.group.id);\n\t\t\t\t\tthis.isDataAvailable = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tthis.router.navigate(['/error', {status: error.status, message: encodeURIComponent(error._body)}]);\n\t\t\t}\n\t\t);\n\t}\n\n\tdefaultGroupSelector(value) {\n\t\tthis.defaultGroupIdValue = value;\n\t}\n\n\tsave() {\n\t\tlet myProfile = new MyProfile();\n\t\tmyProfile.email = this.myProfileForm.value.email;\n\t\tmyProfile.password = this.myProfileForm.value.passwords.password;\n\t\tmyProfile.group = new Group(this.defaultGroupIdValue, 'Selected');\n\n\t\tthis._notificationService.alert('Kaydediliyor', 'İşleminiz yapılıyor, lütfen bekleyiniz.', {timeOut:0, clickToClose:false});\n\t\tthis.isSaving = true;\n\t\tthis._myProfileService.save(myProfile)\n\t\t.subscribe(\n\t\t\t(response) => {\n\t\t\t\tthis.isSaving = false;\n\t\t\t\tif (response.status === 'success') {\n\t\t\t\t\tthis._notificationService.success('İşlem Başarılı', 'Kullanıcı bilgileriniz güncellendi.', {});\n\t\t\t\t} else if (response.status === 'fail') {\n\t\t\t\t\tif (response.message === 'user_email_exists') {\n\t\t\t\t\t\tthis._notificationService.error('Hata', 'Girilen email adresi zaten kayıtlı.', {});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tthis.router.navigate(['/error', {status: error.status, message: encodeURIComponent(error._body)}]);\n\t\t\t}\n\t\t);\n\t}\n}\n"],"sourceRoot":"/source/"}