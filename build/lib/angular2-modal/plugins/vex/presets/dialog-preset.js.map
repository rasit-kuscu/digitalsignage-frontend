{"version":3,"file":"dialog-preset.js","sourceRoot":"","sources":["dialog-preset.ts"],"names":[],"mappings":";;;;;;AACA,8BAA6C,kCAAkC,CAAC,CAAA;AAChF,8BAAsD,kBAAkB,CAAC,CAAA;AAEzE,kCAIO,sBAAsB,CAAC,CAAA;AAE9B,sBAAiC,0BAA0B,CAAC,CAAA;AAG5D,IAAM,eAAe,GAAG;IACpB,SAAS;CACZ,CAAC;AAEF;;GAEG;AACH;IAAkC,gCAAe;IAAjD;QAAkC,8BAAe;IAIjD,CAAC;IAAD,mBAAC;AAAD,CAAC,AAJD,CAAkC,+BAAe,GAIhD;AAJY,oBAAY,eAIxB,CAAA;AAED;;;;GAIG;AACH;IAC4D,uCAAyB;IAMjF,6BAAY,KAAY,EACZ,aAA4B,EAC5B,cAAoC,EACpC,QAAiC;QAFjC,6BAA4B,GAA5B,yBAA4B;QAC5B,8BAAoC,GAApC,0BAAoC;QACpC,wBAAiC,GAAjC,oBAAiC;QACzC,kBACI,cAAM,CAAM,EAAC,OAAA,KAAK,EAAE,WAAA,mCAAS,EAAE,OAAO,EAAE,EAAE,EAAE,aAAa,EAAE,IAAI,EAAC,EAAE,aAAa,IAAI,EAAE,CAAC,EACtF,kBAAU,CAAS,eAAe,EAAE,cAAc,IAAI,EAAE,CAAC,EACzD,QAAQ,IAAS,YAAY,CAAC,sDAAsD;SACvF,CAAC;IACN,CAAC;IAED,uCAAS,GAAT,UAAU,GAAW,EAAE,OAAe,EAAE,OAAyB;QAC7D,IAAI,GAAG,GAAG;YACN,QAAQ,EAAE,GAAG;YACb,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE,OAAO;SACnB,CAAC;QAEF,IAAI,GAAG,GAAG,0BAAU,CAAC,SAAS,CAAC,CAAC;QAC/B,IAAI,CAAC,GAAG,CAAuB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAE3C,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,yCAAW,GAAX,UAAY,IAAmB;QAAnB,oBAAmB,GAAnB,WAAmB;QAC3B,IAAI,CAAC,SAAS,CACV,uDAAuD,EACvD,IAAI,EACJ,UAAC,GAAc,EAAE,MAAkB,IAAK,OAAA,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,EAAlD,CAAkD,CAC7F,CAAC;QACF,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,6CAAe,GAAf,UAAgB,IAAuB;QAAvB,oBAAuB,GAAvB,eAAuB;QACnC,IAAI,CAAC,SAAS,CACV,wDAAwD,EACxD,IAAI,EACJ,UAAC,GAAc,EAAE,MAAkB,IAAK,OAAA,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,EAApB,CAAoB,CAC/D,CAAC;QACF,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IACL,0BAAC;AAAD,CAAC,AAhDD,CAC4D,sCAAsB,GA+CjF;AAhDY,2BAAmB,sBAgD/B,CAAA","sourcesContent":["import {Type} from '@angular/core';\nimport {FluentAssignMethod, privateKey} from '../../../framework/fluent-assign';\nimport {VEXModalContext, VEXModalContextBuilder} from '../modal-context';\nimport {Modal} from '../modal';\nimport {\n    DialogFormModal as component, \n    VEXButtonHandler, \n    VEXButtonConfig\n} from '../dialog-form-modal';\n\nimport {extend, arrayUnion} from '../../../framework/utils';\n\n\nconst DEFAULT_SETTERS = [\n    'content'\n];\n\n/**\n * Data definition\n */\nexport class DialogPreset extends VEXModalContext {\n    defaultResult: any;\n    content: Type;\n    buttons: VEXButtonConfig[];\n} \n\n/**\n * A Preset representing the configuration needed to open MessageModal.\n * This is an abstract implementation with no concrete behaviour.\n * Use derived implementation.\n */\nexport class DialogPresetBuilder<T extends DialogPreset> \n                                                    extends VEXModalContextBuilder<T> {\n    /**\n     * the message to display on the modal.\n     */\n    content: FluentAssignMethod<Type, this>;\n\n    constructor(modal: Modal,\n                defaultValues: T = undefined,\n                initialSetters: string[] = undefined,\n                baseType: new () => T = undefined) {\n        super(\n            extend<any>({modal, component, buttons: [], defaultResult: true}, defaultValues || {}),\n            arrayUnion<string>(DEFAULT_SETTERS, initialSetters || []),\n            baseType || <any>DialogPreset // https://github.com/Microsoft/TypeScript/issues/7234\n        );\n    }\n\n    addButton(css: string, caption: string, onClick: VEXButtonHandler): this {\n        let btn = {\n            cssClass: css,\n            caption: caption,\n            onClick: onClick\n        };\n\n        let key = privateKey('buttons');\n        (this[key] as VEXButtonConfig[]).push(btn);\n\n        return this;\n    }\n\n    addOkButton(text: string = 'OK'): this {\n        this.addButton(\n            'vex-dialog-button-primary vex-dialog-button vex-first',\n            text,\n            (cmp: component, $event: MouseEvent) => cmp.dialog.close(cmp.dialog.context.defaultResult)\n        );\n        return this;\n    }\n\n    addCancelButton(text: string = 'CANCEL'): this {\n        this.addButton(\n            'vex-dialog-button-secondary vex-dialog-button vex-last',\n            text,\n            (cmp: component, $event: MouseEvent) => cmp.dialog.dismiss()\n        );\n        return this;\n    }\n}\n"]}